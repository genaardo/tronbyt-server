{{ define "register" }}
{{ template "base" . }}
{{ end }}
{{ define "title" }}{{ t .Localizer "Register" }}{{ end }}
{{ define "content" }}
<h1>{{ t .Localizer "Register" }}</h1>
{{ if eq .Config.SingleUserAutoLogin "1" }}
<div class="card" style="margin-bottom: 20px; background-color: #fff7ed; border: 1px solid #fdba74;">
    <div style="display: flex; align-items: center; gap: 10px;">
        <span class="material-symbols-outlined text-warning" style="font-size: 24px;">warning</span>
        <div style="flex: 1;">
            <strong>{{ t .Localizer "SINGLE-USER AUTO-LOGIN MODE ACTIVE" }}</strong>
            <div class="text-muted" style="font-size: 0.9em;">{{ t .Localizer "Authentication is disabled for private network access" }}</div>
        </div>
    </div>
</div>
{{ end }}
{{ if .Flashes }}
<div class="card" style="background-color: #fee2e2; border: 1px solid #fca5a5; margin-bottom: 20px;">
    {{ range .Flashes }}
    <p class="text-danger">{{ . }}</p>
    {{ end }}
</div>
{{ end }}
<form method="post">
    <div style="margin-bottom: 15px;">
        <label for="username" style="display: block; margin-bottom: 5px;">{{ t .Localizer "Username (alpha-numeric only, no symbols please.)" }}</label>
        <input class="form-control" name="username" id="username" required style="width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
    </div>
    
    <div style="margin-bottom: 15px;">
        <label for="password" style="display: block; margin-bottom: 5px;">{{ t .Localizer "Password" }}</label>
        <input class="form-control"
               type="password"
               name="password"
               id="password"
               required
               style="width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
    </div>

    <div style="margin-bottom: 15px;">
        <label for="email" style="display: block; margin-bottom: 5px;">{{ t .Localizer "Email Address (optional)" }}</label>
        <input class="form-control" type="email" name="email" id="email" style="width: 100%; padding: 8px; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
    </div>

    {{ if and .User .User.IsAdmin }}
    <div style="margin-bottom: 15px;">
        <label for="is_admin" style="display: inline-flex; align-items: center; gap: 8px;">
            <input type="checkbox" name="is_admin" id="is_admin">
            {{ t .Localizer "Administrator" }}
        </label>
    </div>
    {{ end }}
    
    {{ if eq .UserCount 0 }}
    <button type="submit" class="btn btn-primary">
        <span class="material-symbols-outlined">person_add</span> {{ t .Localizer "Create Admin User" }}
    </button>
{{ else }}
    <button type="submit" class="btn btn-primary">
        <span class="material-symbols-outlined">person_add</span> {{ t .Localizer "Register" }}
    </button>
    {{ end }}
</form>
{{ end }}
